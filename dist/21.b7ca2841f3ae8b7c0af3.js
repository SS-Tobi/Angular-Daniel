(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{QvNt:function(l,n,e){"use strict";var t=e("CcnG"),u=e("Ip0R");e("vMEl"),e.d(n,"a",function(){return o}),e.d(n,"b",function(){return r});var o=t["\u0275crt"]({encapsulation:0,styles:[["button[_ngcontent-%COMP%]{position:relative;transition:.15s ease-in-out}button.loading[_ngcontent-%COMP%]{padding-left:36px}button[_ngcontent-%COMP%]   .btn-spinner[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;margin:auto;left:10px}"]],data:{}});function i(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,0,"div",[["class","btn-spinner float-left"]],null,null,null,null,null))],null,null)}function a(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"span",[],null,null,null,null,null)),t["\u0275ncd"](null,0)],null,null)}function s(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),t["\u0275ted"](1,null,["",""]))],null,function(l,n){l(n,1,0,n.component.loadingText)})}function r(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,8,"button",[],[[8,"type",0],[8,"disabled",0]],null,null,null,null)),t["\u0275did"](1,278528,null,0,u.NgClass,[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t["\u0275pod"](2,{loading:0}),(l()(),t["\u0275and"](16777216,null,null,1,null,i)),t["\u0275did"](4,16384,null,0,u.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,a)),t["\u0275did"](6,16384,null,0,u.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,s)),t["\u0275did"](8,16384,null,0,u.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(l,n){var e=n.component;l(n,1,0,t["\u0275inlineInterpolate"](1,"btn ",e.btnClass,""),l(n,2,0,e.loading)),l(n,4,0,e.loading),l(n,6,0,!e.loading),l(n,8,0,e.loading)},function(l,n){var e=n.component;l(n,0,0,e.type,e.loading)})}},wXkd:function(l,n,e){"use strict";e.r(n);var t=e("CcnG"),u=function(){},o=e("pMnS"),i=e("ZYCi"),a=e("Ip0R"),s=e("gIcY"),r=e("QvNt"),d=e("vMEl"),c=e("mEjd"),m=function(){function l(l,n,e,t){this.fb=l,this.toastr=n,this.factory=e,this.router=t}return l.prototype.ngOnInit=function(){this.buildFormBasic()},l.prototype.buildFormBasic=function(){this.formBasic=this.fb.group({subject:["",[s.Validators.required,s.Validators.min(5)]],message:["",[s.Validators.required,s.Validators.min(20)]]})},l.prototype.createTicket=function(){var l=this;if(this.formBasic.invalid)Object.keys(this.formBasic.controls).map(function(n,e){l.formBasic.controls[n].markAsDirty()});else{var n=this.formBasic.value,e={subject:n.subject,message:n.message};this.loading=!0,this.loadingText="Saving...",this.factory.createTicket(e).subscribe(function(n){l.loading=!1,l.toastr.success("Success","Ticket has been created."),l.router.navigate(["/support/inbox"])},function(n){l.loading=!1,l.toastr.error("Oops","There was an error in creating ticket.")})}},l}(),g=e("SZbH"),p=t["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function f(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"span",[["class","text-danger"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,[" Subject is required "]))],null,null)}function v(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"span",[["class","text-danger"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,[" Message is required "]))],null,null)}function h(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,46,"div",[["class",""]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,9,"div",[["class","breadcrumb"]],null,null,null,null,null)),(l()(),t["\u0275eld"](2,0,null,null,1,"h1",[],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["New Case"])),(l()(),t["\u0275eld"](4,0,null,null,6,"ul",[],null,null,null,null,null)),(l()(),t["\u0275eld"](5,0,null,null,3,"li",[],null,null,null,null,null)),(l()(),t["\u0275eld"](6,0,null,null,2,"a",[["routerLink","/"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(l,n,e){var u=!0;return"click"===n&&(u=!1!==t["\u0275nov"](l,7).onClick(e.button,e.ctrlKey,e.metaKey,e.shiftKey)&&u),u},null,null)),t["\u0275did"](7,671744,null,0,i.t,[i.q,i.a,a.LocationStrategy],{routerLink:[0,"routerLink"]},null),(l()(),t["\u0275ted"](-1,null,["Dashboard"])),(l()(),t["\u0275eld"](9,0,null,null,1,"li",[],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["New Case"])),(l()(),t["\u0275eld"](11,0,null,null,0,"div",[["class","separator-breadcrumb border-top"]],null,null,null,null,null)),(l()(),t["\u0275eld"](12,0,null,null,34,"div",[["class","row"]],null,null,null,null,null)),(l()(),t["\u0275eld"](13,0,null,null,33,"div",[["class","col-12"]],null,null,null,null,null)),(l()(),t["\u0275eld"](14,0,null,null,32,"div",[["class","card mb-4"]],null,null,null,null,null)),(l()(),t["\u0275eld"](15,0,null,null,31,"div",[["class","card-body"]],null,null,null,null,null)),(l()(),t["\u0275eld"](16,0,null,null,30,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(l,n,e){var u=!0,o=l.component;return"submit"===n&&(u=!1!==t["\u0275nov"](l,18).onSubmit(e)&&u),"reset"===n&&(u=!1!==t["\u0275nov"](l,18).onReset()&&u),"ngSubmit"===n&&(u=!1!==o.createTicket()&&u),u},null,null)),t["\u0275did"](17,16384,null,0,s["\u0275angular_packages_forms_forms_bh"],[],null,null),t["\u0275did"](18,540672,null,0,s.FormGroupDirective,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),t["\u0275prd"](2048,null,s.ControlContainer,null,[s.FormGroupDirective]),t["\u0275did"](20,16384,null,0,s.NgControlStatusGroup,[[4,s.ControlContainer]],null,null),(l()(),t["\u0275eld"](21,0,null,null,10,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),t["\u0275eld"](22,0,null,null,1,"label",[["for","subject"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Subject"])),(l()(),t["\u0275eld"](24,0,null,null,5,"input",[["class","form-control"],["formControlName","subject"],["id","subject"],["placeholder","Enter Ticket Subject"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,e){var u=!0;return"input"===n&&(u=!1!==t["\u0275nov"](l,25)._handleInput(e.target.value)&&u),"blur"===n&&(u=!1!==t["\u0275nov"](l,25).onTouched()&&u),"compositionstart"===n&&(u=!1!==t["\u0275nov"](l,25)._compositionStart()&&u),"compositionend"===n&&(u=!1!==t["\u0275nov"](l,25)._compositionEnd(e.target.value)&&u),u},null,null)),t["\u0275did"](25,16384,null,0,s.DefaultValueAccessor,[t.Renderer2,t.ElementRef,[2,s.COMPOSITION_BUFFER_MODE]],null,null),t["\u0275prd"](1024,null,s.NG_VALUE_ACCESSOR,function(l){return[l]},[s.DefaultValueAccessor]),t["\u0275did"](27,671744,null,0,s.FormControlName,[[3,s.ControlContainer],[8,null],[8,null],[6,s.NG_VALUE_ACCESSOR],[2,s["\u0275angular_packages_forms_forms_k"]]],{name:[0,"name"]},null),t["\u0275prd"](2048,null,s.NgControl,null,[s.FormControlName]),t["\u0275did"](29,16384,null,0,s.NgControlStatus,[[4,s.NgControl]],null,null),(l()(),t["\u0275and"](16777216,null,null,1,null,f)),t["\u0275did"](31,16384,null,0,a.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275eld"](32,0,null,null,10,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),t["\u0275eld"](33,0,null,null,1,"label",[["for","message"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Message"])),(l()(),t["\u0275eld"](35,0,null,null,5,"input",[["class","form-control"],["formControlName","message"],["id","message"],["placeholder","Enter Message"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,e){var u=!0;return"input"===n&&(u=!1!==t["\u0275nov"](l,36)._handleInput(e.target.value)&&u),"blur"===n&&(u=!1!==t["\u0275nov"](l,36).onTouched()&&u),"compositionstart"===n&&(u=!1!==t["\u0275nov"](l,36)._compositionStart()&&u),"compositionend"===n&&(u=!1!==t["\u0275nov"](l,36)._compositionEnd(e.target.value)&&u),u},null,null)),t["\u0275did"](36,16384,null,0,s.DefaultValueAccessor,[t.Renderer2,t.ElementRef,[2,s.COMPOSITION_BUFFER_MODE]],null,null),t["\u0275prd"](1024,null,s.NG_VALUE_ACCESSOR,function(l){return[l]},[s.DefaultValueAccessor]),t["\u0275did"](38,671744,null,0,s.FormControlName,[[3,s.ControlContainer],[8,null],[8,null],[6,s.NG_VALUE_ACCESSOR],[2,s["\u0275angular_packages_forms_forms_k"]]],{name:[0,"name"]},null),t["\u0275prd"](2048,null,s.NgControl,null,[s.FormControlName]),t["\u0275did"](40,16384,null,0,s.NgControlStatus,[[4,s.NgControl]],null,null),(l()(),t["\u0275and"](16777216,null,null,1,null,v)),t["\u0275did"](42,16384,null,0,a.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275eld"](43,0,null,null,3,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),t["\u0275eld"](44,0,null,null,2,"btn-loading",[["btnClass","btn-primary"]],null,null,null,r.b,r.a)),t["\u0275did"](45,114688,null,0,d.a,[],{loading:[0,"loading"],btnClass:[1,"btnClass"],loadingText:[2,"loadingText"]},null),(l()(),t["\u0275ted"](-1,0,[" Open Ticket "]))],function(l,n){var e=n.component;l(n,7,0,"/"),l(n,18,0,e.formBasic),l(n,27,0,"subject"),l(n,31,0,e.formBasic.controls.subject.dirty&&(null==e.formBasic.controls.subject.errors?null:e.formBasic.controls.subject.errors.required)),l(n,38,0,"message"),l(n,42,0,e.formBasic.controls.message.dirty&&(null==e.formBasic.controls.message.errors?null:e.formBasic.controls.message.errors.required)),l(n,45,0,e.loading,"btn-primary",e.loadingText)},function(l,n){l(n,6,0,t["\u0275nov"](n,7).target,t["\u0275nov"](n,7).href),l(n,16,0,t["\u0275nov"](n,20).ngClassUntouched,t["\u0275nov"](n,20).ngClassTouched,t["\u0275nov"](n,20).ngClassPristine,t["\u0275nov"](n,20).ngClassDirty,t["\u0275nov"](n,20).ngClassValid,t["\u0275nov"](n,20).ngClassInvalid,t["\u0275nov"](n,20).ngClassPending),l(n,24,0,t["\u0275nov"](n,29).ngClassUntouched,t["\u0275nov"](n,29).ngClassTouched,t["\u0275nov"](n,29).ngClassPristine,t["\u0275nov"](n,29).ngClassDirty,t["\u0275nov"](n,29).ngClassValid,t["\u0275nov"](n,29).ngClassInvalid,t["\u0275nov"](n,29).ngClassPending),l(n,35,0,t["\u0275nov"](n,40).ngClassUntouched,t["\u0275nov"](n,40).ngClassTouched,t["\u0275nov"](n,40).ngClassPristine,t["\u0275nov"](n,40).ngClassDirty,t["\u0275nov"](n,40).ngClassValid,t["\u0275nov"](n,40).ngClassInvalid,t["\u0275nov"](n,40).ngClassPending)})}var b=t["\u0275ccf"]("app-new-case",m,function(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"app-new-case",[],null,null,null,h,p)),t["\u0275did"](1,114688,null,0,m,[s.FormBuilder,g.j,c.a,i.q],null,null)],function(l,n){l(n,1,0)},null)},{},{},[]),C=e("R/X1"),k=e("3/HP"),T=e("FO+L"),y=e("nhM1"),S=e("BARL"),_=e("Y0Co"),x=e("8iEZ"),w=function(){function l(l,n,e,t){this.route=l,this.router=n,this.ticketService=e,this.toastr=t,this.rows=[]}return l.prototype.ngOnInit=function(){this.route.snapshot.data.tickets&&(this.rows=this.route.snapshot.data.tickets)},l.prototype.loadTickets=function(){var l=this;this.ticketService.getTickets().subscribe(function(n){l.rows=n,l.rows=l.rows.slice()},function(n){l.toastr.error("Failed to fetch tickets","Oh!")})},l.prototype.markAsResolved=function(l){var n=this;this.ticketService.markAsResolved(l).subscribe(function(l){n.toastr.success("Ticket marked as resolved.","Yippy!"),n.loadTickets()},function(l){n.toastr.error("Failed to resolve ticket","Oh!")})},l.prototype.deleteTicket=function(l){var n=this;this.ticketService.deleteTicket(l).subscribe(function(l){n.toastr.success("Ticket has been deleted.","Oh!"),n.loadTickets()},function(l){n.toastr.error("Failed to delete ticket","Oh!")})},l}(),I=t["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function D(l){return t["\u0275vid"](0,[(l()(),t["\u0275ted"](0,null,[" "," "]))],null,function(l,n){l(n,0,0,n.context.row.ticket_id)})}function R(l){return t["\u0275vid"](0,[(l()(),t["\u0275ted"](0,null,[" "," "]))],null,function(l,n){l(n,0,0,n.context.row.subject)})}function N(l){return t["\u0275vid"](0,[(l()(),t["\u0275ted"](0,null,[" "," "]))],null,function(l,n){l(n,0,0,n.context.row.added_on)})}function F(l){return t["\u0275vid"](0,[(l()(),t["\u0275ted"](0,null,[" "," "]))],null,function(l,n){l(n,0,0,n.context.row.status)})}function O(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"a",[["href","javascript:;"],["title","Mark As Resolve"]],null,[[null,"click"]],function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.markAsResolved(l.parent.context.row._id)&&t),t},null,null)),(l()(),t["\u0275eld"](1,0,null,null,0,"i",[["class","i-Like"]],null,null,null,null,null))],null,null)}function M(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,7,"div",[["class","form-actions"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,2,"a",[["title","View Ticket"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(l,n,e){var u=!0;return"click"===n&&(u=!1!==t["\u0275nov"](l,2).onClick(e.button,e.ctrlKey,e.metaKey,e.shiftKey)&&u),u},null,null)),t["\u0275did"](2,671744,null,0,i.t,[i.q,i.a,a.LocationStrategy],{routerLink:[0,"routerLink"]},null),(l()(),t["\u0275eld"](3,0,null,null,0,"i",[["class","i-Eye"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,O)),t["\u0275did"](5,16384,null,0,a.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275eld"](6,0,null,null,1,"a",[["href","javascript:;"],["title","Delete Ticket"]],null,[[null,"click"]],function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.deleteTicket(l.context.row._id)&&t),t},null,null)),(l()(),t["\u0275eld"](7,0,null,null,0,"i",[["class","i-Close"]],null,null,null,null,null))],function(l,n){l(n,2,0,t["\u0275inlineInterpolate"](1,"/support/view-ticket/",n.context.row._id,"")),l(n,5,0,"open"==n.context.row.status)},function(l,n){l(n,1,0,t["\u0275nov"](n,2).target,t["\u0275nov"](n,2).href)})}function j(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,59,"div",[["class",""]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,9,"div",[["class","breadcrumb"]],null,null,null,null,null)),(l()(),t["\u0275eld"](2,0,null,null,1,"h1",[],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Support Inbox"])),(l()(),t["\u0275eld"](4,0,null,null,6,"ul",[],null,null,null,null,null)),(l()(),t["\u0275eld"](5,0,null,null,3,"li",[],null,null,null,null,null)),(l()(),t["\u0275eld"](6,0,null,null,2,"a",[["routerLink","/"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(l,n,e){var u=!0;return"click"===n&&(u=!1!==t["\u0275nov"](l,7).onClick(e.button,e.ctrlKey,e.metaKey,e.shiftKey)&&u),u},null,null)),t["\u0275did"](7,671744,null,0,i.t,[i.q,i.a,a.LocationStrategy],{routerLink:[0,"routerLink"]},null),(l()(),t["\u0275ted"](-1,null,["Dashboard"])),(l()(),t["\u0275eld"](9,0,null,null,1,"li",[],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Support Inbox"])),(l()(),t["\u0275eld"](11,0,null,null,3,"div",[["class","breadcrumb buttons"]],null,null,null,null,null)),(l()(),t["\u0275eld"](12,0,null,null,2,"a",[["class","btn btn-primary"],["routerLink","/support/new-case"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(l,n,e){var u=!0;return"click"===n&&(u=!1!==t["\u0275nov"](l,13).onClick(e.button,e.ctrlKey,e.metaKey,e.shiftKey)&&u),u},null,null)),t["\u0275did"](13,671744,null,0,i.t,[i.q,i.a,a.LocationStrategy],{routerLink:[0,"routerLink"]},null),(l()(),t["\u0275ted"](-1,null,["New Case"])),(l()(),t["\u0275eld"](15,0,null,null,0,"div",[["class","separator-breadcrumb border-top"]],null,null,null,null,null)),(l()(),t["\u0275eld"](16,0,null,null,43,"div",[["class","row"]],null,null,null,null,null)),(l()(),t["\u0275eld"](17,0,null,null,42,"div",[["class","col-md-12"]],null,null,null,null,null)),(l()(),t["\u0275eld"](18,0,null,null,41,"div",[["class","card o-hidden"]],null,null,null,null,null)),(l()(),t["\u0275eld"](19,0,null,null,40,"ngx-datatable",[["class","material fullscreen ngx-datatable"]],[[2,"fixed-header",null],[2,"fixed-row",null],[2,"scroll-vertical",null],[2,"virtualized",null],[2,"scroll-horz",null],[2,"selectable",null],[2,"checkbox-selection",null],[2,"cell-selection",null],[2,"single-selection",null],[2,"multi-selection",null],[2,"multi-click-selection",null]],[["window","resize"]],function(l,n,e){var u=!0;return"window:resize"===n&&(u=!1!==t["\u0275nov"](l,20).onWindowResize()&&u),u},C.b,C.a)),t["\u0275did"](20,5750784,null,4,k.DatatableComponent,[[1,T.ScrollbarHelper],[1,y.DimensionsHelper],t.ChangeDetectorRef,t.ElementRef,t.KeyValueDiffers,S.ColumnChangesService],{rows:[0,"rows"],scrollbarV:[1,"scrollbarV"],rowHeight:[2,"rowHeight"],columnMode:[3,"columnMode"],headerHeight:[4,"headerHeight"],footerHeight:[5,"footerHeight"],limit:[6,"limit"]},null),t["\u0275qud"](603979776,1,{columnTemplates:1}),t["\u0275qud"](335544320,2,{rowDetail:0}),t["\u0275qud"](335544320,3,{groupHeader:0}),t["\u0275qud"](335544320,4,{footer:0}),(l()(),t["\u0275eld"](25,0,null,null,6,"ngx-datatable-column",[["name","Ticket ID"]],null,null,null,null,null)),t["\u0275did"](26,540672,[[1,4]],3,_.DataTableColumnDirective,[S.ColumnChangesService],{name:[0,"name"],maxWidth:[1,"maxWidth"]},null),t["\u0275qud"](335544320,5,{cellTemplate:0}),t["\u0275qud"](335544320,6,{headerTemplate:0}),t["\u0275qud"](335544320,7,{treeToggleTemplate:0}),(l()(),t["\u0275and"](0,[[5,2]],null,1,null,D)),t["\u0275did"](31,16384,null,0,x.DataTableColumnCellDirective,[t.TemplateRef],null,null),(l()(),t["\u0275eld"](32,0,null,null,6,"ngx-datatable-column",[["name","Subject"]],null,null,null,null,null)),t["\u0275did"](33,540672,[[1,4]],3,_.DataTableColumnDirective,[S.ColumnChangesService],{name:[0,"name"]},null),t["\u0275qud"](335544320,8,{cellTemplate:0}),t["\u0275qud"](335544320,9,{headerTemplate:0}),t["\u0275qud"](335544320,10,{treeToggleTemplate:0}),(l()(),t["\u0275and"](0,[[8,2]],null,1,null,R)),t["\u0275did"](38,16384,null,0,x.DataTableColumnCellDirective,[t.TemplateRef],null,null),(l()(),t["\u0275eld"](39,0,null,null,6,"ngx-datatable-column",[["name","Created On"]],null,null,null,null,null)),t["\u0275did"](40,540672,[[1,4]],3,_.DataTableColumnDirective,[S.ColumnChangesService],{name:[0,"name"]},null),t["\u0275qud"](335544320,11,{cellTemplate:0}),t["\u0275qud"](335544320,12,{headerTemplate:0}),t["\u0275qud"](335544320,13,{treeToggleTemplate:0}),(l()(),t["\u0275and"](0,[[11,2]],null,1,null,N)),t["\u0275did"](45,16384,null,0,x.DataTableColumnCellDirective,[t.TemplateRef],null,null),(l()(),t["\u0275eld"](46,0,null,null,6,"ngx-datatable-column",[["name","Status"]],null,null,null,null,null)),t["\u0275did"](47,540672,[[1,4]],3,_.DataTableColumnDirective,[S.ColumnChangesService],{name:[0,"name"]},null),t["\u0275qud"](335544320,14,{cellTemplate:0}),t["\u0275qud"](335544320,15,{headerTemplate:0}),t["\u0275qud"](335544320,16,{treeToggleTemplate:0}),(l()(),t["\u0275and"](0,[[14,2]],null,1,null,F)),t["\u0275did"](52,16384,null,0,x.DataTableColumnCellDirective,[t.TemplateRef],null,null),(l()(),t["\u0275eld"](53,0,null,null,6,"ngx-datatable-column",[["name","Action"]],null,null,null,null,null)),t["\u0275did"](54,540672,[[1,4]],3,_.DataTableColumnDirective,[S.ColumnChangesService],{name:[0,"name"]},null),t["\u0275qud"](335544320,17,{cellTemplate:0}),t["\u0275qud"](335544320,18,{headerTemplate:0}),t["\u0275qud"](335544320,19,{treeToggleTemplate:0}),(l()(),t["\u0275and"](0,[[17,2]],null,1,null,M)),t["\u0275did"](59,16384,null,0,x.DataTableColumnCellDirective,[t.TemplateRef],null,null)],function(l,n){var e=n.component;l(n,7,0,"/"),l(n,13,0,"/support/new-case"),l(n,20,0,e.rows,!0,60,"force",50,50,10),l(n,26,0,"Ticket ID",150),l(n,33,0,"Subject"),l(n,40,0,"Created On"),l(n,47,0,"Status"),l(n,54,0,"Action")},function(l,n){l(n,6,0,t["\u0275nov"](n,7).target,t["\u0275nov"](n,7).href),l(n,12,0,t["\u0275nov"](n,13).target,t["\u0275nov"](n,13).href),l(n,19,1,[t["\u0275nov"](n,20).isFixedHeader,t["\u0275nov"](n,20).isFixedRow,t["\u0275nov"](n,20).isVertScroll,t["\u0275nov"](n,20).isVirtualized,t["\u0275nov"](n,20).isHorScroll,t["\u0275nov"](n,20).isSelectable,t["\u0275nov"](n,20).isCheckboxSelection,t["\u0275nov"](n,20).isCellSelection,t["\u0275nov"](n,20).isSingleSelection,t["\u0275nov"](n,20).isMultiSelection,t["\u0275nov"](n,20).isMultiClickSelection])})}var V=t["\u0275ccf"]("app-inbox",w,function(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"app-inbox",[],null,null,null,j,I)),t["\u0275did"](1,114688,null,0,w,[i.a,i.q,c.a,g.j],null,null)],function(l,n){l(n,1,0)},null)},{},{},[]),B=e("K9Ia"),E=e("26FU"),L=e("9uVP"),q=e("t/Na"),A=function(){function l(l,n){this.http=l,this.route=n,this.initialHash="",this.ticketId="",this.messageList$=new B.a,this.updateAvailable$=new E.a(!1),this.context=this}return l.prototype.updateMessageList=function(){var l=this;this.context.http.get(L.a.getConstants().API_HOST+"/modules/ticket-messages/"+this.ticketId).subscribe(function(n){n.has_message&&n.messages.forEach(function(n){l.context.messageList$.next(n)}),setTimeout(function(){l.context.updateMessageList()},1e3)})},l.prototype.ticketMessages=function(){return this.http.get(L.a.getConstants().API_HOST+"/modules/ticket-messages/"+this.ticketId)},l.prototype.sendTicketMessage=function(l){return this.http.post(L.a.getConstants().API_HOST+"modules/ticket-messages",l)},l.ngInjectableDef=t.defineInjectable({factory:function(){return new l(t.inject(q.c),t.inject(i.a))},token:l,providedIn:"root"}),l}(),P=e("IYfF"),H=function(){function l(l,n,e,t,u,o,i){this.route=l,this.router=n,this.ticketService=e,this.auth=t,this.factory=u,this.toastr=o,this.fb=i,this.messageLists=[],this.loadingText='<i  class="i-Paper-Plane">&nbsp;</i>Send'}return l.prototype.buildFormBasic=function(){this.formBasic=this.fb.group({message:["",[s.Validators.required]]})},l.prototype.scrollGo=function(){this.myScrollContainer.nativeElement.scrollTop=this.myScrollContainer.nativeElement.scrollHeight+100},l.prototype.scrollToBottom=function(){var l=this;try{setTimeout(function(n){l.scrollGo()},500)}catch(l){}},l.prototype.ngOnInit=function(){var l=this;this.ticket=this.route.snapshot.data.data.object,this.factory.ticketId=this.ticket._id,this.messageLists=this.route.snapshot.data.data.messages,this.scrollToBottom(),this.factory.updateMessageList(),this.subscription=this.factory.messageList$.subscribe(function(n){l.messageLists.push(n),l.scrollToBottom()}),this.buildFormBasic()},l.prototype.markResolve=function(){var l=this;this.ticketService.markAsResolved(this.ticket._id).subscribe(function(n){l.toastr.success("Ticket marked as resolved.","Oh!"),l.router.navigate(["/support/inbox"])},function(n){l.toastr.error("Failed to resolve ticket","Oh!")})},l.prototype.submit=function(){var l=this;if(this.formBasic.invalid)Object.keys(this.formBasic.controls).map(function(n,e){l.formBasic.controls[n].markAsDirty()});else{var n=this.formBasic.value,e={message:n.message,ticket_id:this.ticket._id};this.loading=!0,this.loadingText="Sending...",this.factory.sendTicketMessage(e).subscribe(function(e){l.loading=!1,l.toastr.success("Success","Messages has been sent.");var t=new Date;l.messageLists.push({message:n.message,user:"You",time:t.getFullYear()+"-"+t.getMonth()+"-"+t.getDay()+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()}),l.formBasic.reset(),l.scrollToBottom()},function(n){l.loading=!1,l.toastr.error("Oops","There was an error while sending message.")})}},l.prototype.ngOnDestroy=function(){console.log("Destroy"),this.subscription.unsubscribe()},l}(),U=t["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function G(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,9,"div",[["class","mb-4 ng-tns-c9-0 ng-star-inserted"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,8,"div",[["class","d-flex ng-tns-c9-0 ng-star-inserted"]],null,null,null,null,null)),(l()(),t["\u0275eld"](2,0,null,null,7,"div",[["class","message flex-grow-1"]],null,null,null,null,null)),(l()(),t["\u0275eld"](3,0,null,null,4,"div",[["class","d-flex"]],null,null,null,null,null)),(l()(),t["\u0275eld"](4,0,null,null,1,"p",[["class","mb-1 text-title text-16 flex-grow-1"]],null,null,null,null,null)),(l()(),t["\u0275ted"](5,null,["",""])),(l()(),t["\u0275eld"](6,0,null,null,1,"span",[["class","text-small text-muted"]],null,null,null,null,null)),(l()(),t["\u0275ted"](7,null,["",""])),(l()(),t["\u0275eld"](8,0,null,null,1,"p",[["class","m-0"]],null,null,null,null,null)),(l()(),t["\u0275ted"](9,null,[" "," "]))],null,function(l,n){l(n,5,0,n.context.$implicit.user),l(n,7,0,n.context.$implicit.time),l(n,9,0,n.context.$implicit.message)})}function K(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"span",[["class","text-danger"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,[" Message is required "]))],null,null)}function z(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"button",[["class","btn btn-rounded btn-outline-success"],["type","button"]],null,[[null,"click"]],function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.markResolve()&&t),t},null,null)),(l()(),t["\u0275ted"](-1,null,["Mark as Resolved"]))],null,null)}function Y(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,23,"div",[["class","pl-3 pr-3 pt-3 pb-3 box-shadow-1 chat-input-area ng-tns-c9-0 ng-star-inserted"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,22,"form",[["class","inputForm ng-pristine ng-valid ng-touched"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(l,n,e){var u=!0,o=l.component;return"submit"===n&&(u=!1!==t["\u0275nov"](l,3).onSubmit(e)&&u),"reset"===n&&(u=!1!==t["\u0275nov"](l,3).onReset()&&u),"ngSubmit"===n&&(u=!1!==o.submit()&&u),u},null,null)),t["\u0275did"](2,16384,null,0,s["\u0275angular_packages_forms_forms_bh"],[],null,null),t["\u0275did"](3,540672,null,0,s.FormGroupDirective,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),t["\u0275prd"](2048,null,s.ControlContainer,null,[s.FormGroupDirective]),t["\u0275did"](5,16384,null,0,s.NgControlStatusGroup,[[4,s.ControlContainer]],null,null),(l()(),t["\u0275eld"](6,0,null,null,8,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),t["\u0275eld"](7,0,null,null,5,"textarea",[["class","form-control form-control-rounded ng-pristine ng-valid ng-touched"],["cols","30"],["data-gramm","true"],["data-gramm_editor","true"],["data-gramm_id","d1847d9b-a81e-12e6-1a32-05c321ed9e8c"],["data-txt_gramm_id","d1847d9b-a81e-12e6-1a32-05c321ed9e8c"],["formControlName","message"],["id","message"],["name","message"],["ngmodel",""],["placeholder","Type your message"],["rows","3"],["spellcheck","false"],["style","background: transparent none repeat scroll 0% 0% !important; z-index: auto; position: relative; line-height: 19.5px; font-size: 13px; transition: none 0s ease 0s;"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,e){var u=!0;return"input"===n&&(u=!1!==t["\u0275nov"](l,8)._handleInput(e.target.value)&&u),"blur"===n&&(u=!1!==t["\u0275nov"](l,8).onTouched()&&u),"compositionstart"===n&&(u=!1!==t["\u0275nov"](l,8)._compositionStart()&&u),"compositionend"===n&&(u=!1!==t["\u0275nov"](l,8)._compositionEnd(e.target.value)&&u),u},null,null)),t["\u0275did"](8,16384,null,0,s.DefaultValueAccessor,[t.Renderer2,t.ElementRef,[2,s.COMPOSITION_BUFFER_MODE]],null,null),t["\u0275prd"](1024,null,s.NG_VALUE_ACCESSOR,function(l){return[l]},[s.DefaultValueAccessor]),t["\u0275did"](10,671744,null,0,s.FormControlName,[[3,s.ControlContainer],[8,null],[8,null],[6,s.NG_VALUE_ACCESSOR],[2,s["\u0275angular_packages_forms_forms_k"]]],{name:[0,"name"]},null),t["\u0275prd"](2048,null,s.NgControl,null,[s.FormControlName]),t["\u0275did"](12,16384,null,0,s.NgControlStatus,[[4,s.NgControl]],null,null),(l()(),t["\u0275and"](16777216,null,null,1,null,K)),t["\u0275did"](14,16384,null,0,a.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275eld"](15,0,null,null,8,"div",[["class","d-flex"]],null,null,null,null,null)),(l()(),t["\u0275eld"](16,0,null,null,4,"btn-loading",[["btnClass","btn btn-rounded btn-outline-primary"]],null,null,null,r.b,r.a)),t["\u0275did"](17,114688,null,0,d.a,[],{loading:[0,"loading"],btnClass:[1,"btnClass"],loadingText:[2,"loadingText"]},null),(l()(),t["\u0275eld"](18,0,null,0,1,"i",[["class","i-Paper-Plane"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["\xa0"])),(l()(),t["\u0275ted"](-1,0,["Send "])),(l()(),t["\u0275eld"](21,0,null,null,0,"div",[["class","flex-grow-1"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,z)),t["\u0275did"](23,16384,null,0,a.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(l,n){var e=n.component;l(n,3,0,e.formBasic),l(n,10,0,"message"),l(n,14,0,e.formBasic.controls.message.dirty&&(null==e.formBasic.controls.message.errors?null:e.formBasic.controls.message.errors.required)),l(n,17,0,e.loading,"btn btn-rounded btn-outline-primary",e.loadingText),l(n,23,0,!e.auth.isStaff())},function(l,n){l(n,1,0,t["\u0275nov"](n,5).ngClassUntouched,t["\u0275nov"](n,5).ngClassTouched,t["\u0275nov"](n,5).ngClassPristine,t["\u0275nov"](n,5).ngClassDirty,t["\u0275nov"](n,5).ngClassValid,t["\u0275nov"](n,5).ngClassInvalid,t["\u0275nov"](n,5).ngClassPending),l(n,7,0,t["\u0275nov"](n,12).ngClassUntouched,t["\u0275nov"](n,12).ngClassTouched,t["\u0275nov"](n,12).ngClassPristine,t["\u0275nov"](n,12).ngClassDirty,t["\u0275nov"](n,12).ngClassValid,t["\u0275nov"](n,12).ngClassInvalid,t["\u0275nov"](n,12).ngClassPending)})}function $(l){return t["\u0275vid"](0,[t["\u0275pid"](0,a.UpperCasePipe,[]),t["\u0275qud"](402653184,1,{myScrollContainer:0}),(l()(),t["\u0275eld"](2,0,null,null,18,"div",[["class","card chat-sidebar-container sidebar-container"]],null,null,null,null,null)),(l()(),t["\u0275eld"](3,0,null,null,17,"div",[["class","chat-content-wrap"]],null,null,null,null,null)),(l()(),t["\u0275eld"](4,0,null,null,16,"div",[["class","ng-tns-c9-0"]],null,null,null,null,null)),(l()(),t["\u0275eld"](5,0,null,null,10,"div",[["class","d-flex pl-3 pr-3 pt-2 pb-2 o-hidden box-shadow-1 chat-topbar"]],null,null,null,null,null)),(l()(),t["\u0275eld"](6,0,null,null,1,"a",[["class","link-icon d-md-none"]],null,null,null,null,null)),(l()(),t["\u0275eld"](7,0,null,null,0,"i",[["class","icon-regular i-Right ml-0 mr-3"]],null,null,null,null,null)),(l()(),t["\u0275eld"](8,0,null,null,7,"div",[["class","align-items-center ng-tns-c9-0 ng-star-inserted"]],null,null,null,null,null)),(l()(),t["\u0275eld"](9,0,null,null,4,"h3",[["class","m-0 text-title text-16 flex-grow-1"]],null,null,null,null,null)),(l()(),t["\u0275ted"](10,null,[""," "])),(l()(),t["\u0275eld"](11,0,null,null,2,"span",[],[[8,"className",0]],null,null,null,null)),(l()(),t["\u0275ted"](12,null,["",""])),t["\u0275ppd"](13,1),(l()(),t["\u0275eld"](14,0,null,null,1,"p",[["class","m-0 text-title text-16 flex-grow-1"]],null,null,null,null,null)),(l()(),t["\u0275ted"](15,null,["",""])),(l()(),t["\u0275eld"](16,0,[[1,0],["messageBoxContainer",1]],null,2,"div",[["class","chat-content rtl-ps-none ng-tns-c9-0 ps ng-star-inserted ps--active-y"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,G)),t["\u0275did"](18,278528,null,0,a.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,Y)),t["\u0275did"](20,16384,null,0,a.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(l,n){var e=n.component;l(n,18,0,e.messageLists),l(n,20,0,"open"==e.ticket.status&&!e.auth.isAdmin())},function(l,n){var e=n.component;l(n,10,0,e.ticket.subject),l(n,11,0,t["\u0275inlineInterpolate"](1,"badge badge-",e.ticket.status,"")),l(n,12,0,t["\u0275unv"](n,12,0,l(n,13,0,t["\u0275nov"](n,0),e.ticket.status))),l(n,15,0,e.ticket.message)})}var J=t["\u0275ccf"]("app-view-ticket",H,function(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"app-view-ticket",[],null,null,null,$,U)),t["\u0275did"](1,245760,null,0,H,[i.a,i.q,c.a,P.a,A,g.j,s.FormBuilder],null,null)],function(l,n){l(n,1,0)},null)},{},{},[]),W=e("9AJC"),Z=e("xkgV"),Q=e("ZYjt"),X=e("4GxJ"),ll=e("9Bt9"),nl=e("qAlS"),el=function(){function l(l){this.factory=l}return l.prototype.resolve=function(l,n){return this.factory.getTickets()},l.ngInjectableDef=t.defineInjectable({factory:function(){return new l(t.inject(c.a))},token:l,providedIn:"root"}),l}(),tl=function(){function l(l){this.factory=l}return l.prototype.resolve=function(l,n){return this.factory.getTicket(l.params.id)},l.ngInjectableDef=t.defineInjectable({factory:function(){return new l(t.inject(c.a))},token:l,providedIn:"root"}),l}(),ul=function(){},ol=e("F8xH"),il=e("bse0"),al=e("Ey38"),sl=e("aYsj"),rl=e("mnDI"),dl=e("ate/"),cl=e("jgPy"),ml=e("JdLL");e.d(n,"SupportModuleNgFactory",function(){return gl});var gl=t["\u0275cmf"](u,[],function(l){return t["\u0275mod"]([t["\u0275mpd"](512,t.ComponentFactoryResolver,t["\u0275CodegenComponentFactoryResolver"],[[8,[o.a,b,V,J,W.a,W.b,W.m,W.i,W.j,W.k,W.l]],[3,t.ComponentFactoryResolver],t.NgModuleRef]),t["\u0275mpd"](4608,a.NgLocalization,a.NgLocaleLocalization,[t.LOCALE_ID,[2,a["\u0275angular_packages_common_common_a"]]]),t["\u0275mpd"](4608,Z.e,Z.e,[]),t["\u0275mpd"](4608,T.ScrollbarHelper,T.ScrollbarHelper,[Q.DOCUMENT]),t["\u0275mpd"](4608,y.DimensionsHelper,y.DimensionsHelper,[]),t["\u0275mpd"](4608,S.ColumnChangesService,S.ColumnChangesService,[]),t["\u0275mpd"](4608,s["\u0275angular_packages_forms_forms_j"],s["\u0275angular_packages_forms_forms_j"],[]),t["\u0275mpd"](4608,X.v,X.v,[t.ComponentFactoryResolver,t.Injector,X.Y,X.w]),t["\u0275mpd"](4608,s.FormBuilder,s.FormBuilder,[]),t["\u0275mpd"](4608,ll.f,ll.f,[a.DOCUMENT,t.NgZone,nl.a,ll.h]),t["\u0275mpd"](1073742336,a.CommonModule,a.CommonModule,[]),t["\u0275mpd"](1073742336,i.u,i.u,[[2,i.A],[2,i.q]]),t["\u0275mpd"](1073742336,ul,ul,[]),t["\u0275mpd"](1073742336,Z.a,Z.a,[]),t["\u0275mpd"](1073742336,ol.NgxDatatableModule,ol.NgxDatatableModule,[]),t["\u0275mpd"](1073742336,X.c,X.c,[]),t["\u0275mpd"](1073742336,X.f,X.f,[]),t["\u0275mpd"](1073742336,X.g,X.g,[]),t["\u0275mpd"](1073742336,X.k,X.k,[]),t["\u0275mpd"](1073742336,X.l,X.l,[]),t["\u0275mpd"](1073742336,s["\u0275angular_packages_forms_forms_bc"],s["\u0275angular_packages_forms_forms_bc"],[]),t["\u0275mpd"](1073742336,s.FormsModule,s.FormsModule,[]),t["\u0275mpd"](1073742336,X.q,X.q,[]),t["\u0275mpd"](1073742336,X.t,X.t,[]),t["\u0275mpd"](1073742336,X.x,X.x,[]),t["\u0275mpd"](1073742336,X.B,X.B,[]),t["\u0275mpd"](1073742336,X.E,X.E,[]),t["\u0275mpd"](1073742336,X.H,X.H,[]),t["\u0275mpd"](1073742336,X.K,X.K,[]),t["\u0275mpd"](1073742336,X.Q,X.Q,[]),t["\u0275mpd"](1073742336,X.U,X.U,[]),t["\u0275mpd"](1073742336,X.V,X.V,[]),t["\u0275mpd"](1073742336,X.W,X.W,[]),t["\u0275mpd"](1073742336,X.y,X.y,[]),t["\u0275mpd"](1073742336,s.ReactiveFormsModule,s.ReactiveFormsModule,[]),t["\u0275mpd"](1073742336,il.c,il.c,[]),t["\u0275mpd"](1073742336,al.a,al.a,[]),t["\u0275mpd"](1073742336,sl.a,sl.a,[]),t["\u0275mpd"](1073742336,rl.a,rl.a,[]),t["\u0275mpd"](1073742336,ll.g,ll.g,[]),t["\u0275mpd"](1073742336,dl.a,dl.a,[]),t["\u0275mpd"](1073742336,cl.a,cl.a,[]),t["\u0275mpd"](1073742336,ml.CustomFormsModule,ml.CustomFormsModule,[]),t["\u0275mpd"](1073742336,u,u,[]),t["\u0275mpd"](1024,i.k,function(){return[[{path:"new-case",component:m},{path:"inbox",component:w,resolve:{tickets:el}},{path:"view-ticket/:id",component:H,resolve:{data:tl}}]]},[])])})}}]);